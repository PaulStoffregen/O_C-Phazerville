; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter, extra scripting
;   Upload options: custom port, speed and extra flags
;   Library options: dependencies, extra library storages
; Please visit documentation for the other options and examples
; http://docs.platformio.org/page/projectconf.html

[platformio]
src_dir = .
default_envs = oc_prod

[env]
; platform = teensy@4.8.0 ; 1.51
platform = teensy@4.14.0 ; 1.55
framework = arduino
board = teensy31
board_build.f_cpu = 120000000
lib_deps = EEPROM
build_flags =
  -DTEENSY_OPT_FASTER
  !echo "-DOC_BUILD_TAG='\"$(resources/oc_build_tag.sh)\"'"
  -Iextern
  -DUSB_SERIAL

; Leaving in USB_SERIAL for now since it simplifies upload
; otherwise prod builds should probably use -DUSB_DISABLED

extra_scripts = pre:resources/progname.py

upload_protocol = teensy-cli
monitor_speed = 115200
; monitor_port = /dev/tty.usbmodem75026601

[env:oc_prod]
build_flags =
  ${env.build_flags}

[env:oc_prod_180]
build_flags =
  ${env.build_flags}
  -DFLIP_180

[env:oc_dev]
build_flags =
  ${env.build_flags}
  -DOC_DEV
; -DPRINT_DEBUG
